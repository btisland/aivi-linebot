---
name: æ–‡ä»¶æ’°å¯«èˆ‡ Hugging Face éƒ¨ç½²
status: open
created: 2025-12-09T09:13:21Z
updated: 2025-12-09T09:24:52Z
github: https://github.com/btisland/aivi-linebot/issues/8
depends_on: [006]
parallel: false
conflicts_with: []
---

# Task: æ–‡ä»¶æ’°å¯«èˆ‡ Hugging Face éƒ¨ç½²

## Description
æ’°å¯«å®Œæ•´çš„å°ˆæ¡ˆæ–‡ä»¶ï¼ŒåŒ…å« README.mdã€é–‹ç™¼æŒ‡å—ã€ä½¿ç”¨èªªæ˜ï¼Œä¸¦è¨­å®š GitHub Actions è‡ªå‹•åŒæ­¥åˆ° Hugging Face Spaceã€‚å®Œæˆéƒ¨ç½²è¨­å®šï¼Œç¢ºä¿ webhook æœå‹™å¯åœ¨ Hugging Face ä¸Šæ­£å¸¸é‹è¡Œã€‚

## Acceptance Criteria
- [ ] README.md å·²æ›´æ–°ï¼ŒåŒ…å«å°ˆæ¡ˆç°¡ä»‹ã€åŠŸèƒ½èªªæ˜ã€å®‰è£æ­¥é©Ÿ
- [ ] é–‹ç™¼æŒ‡å—æ–‡ä»¶å·²å»ºç«‹ï¼ˆ`docs/development.md`ï¼‰
- [ ] GitHub Actions workflow å·²è¨­å®šï¼ˆ`.github/workflows/sync-to-hf.yml`ï¼‰
- [ ] Hugging Face Space è¨­å®šæª”å·²å»ºç«‹
- [ ] ç’°å¢ƒè®Šæ•¸å·²åœ¨ Hugging Face Space è¨­å®š
- [ ] éƒ¨ç½²åˆ° Hugging Face Space æˆåŠŸ
- [ ] Webhook URL å·²è¨­å®šåˆ° LINE Developers Console
- [ ] ç«¯å°ç«¯æ¸¬è©¦ï¼šåœ¨æ­£å¼ç’°å¢ƒå‚³é€ `/aivi` å¯æ­£å¸¸å›è¦†

## Technical Details

### README.md å…§å®¹çµæ§‹

```markdown
# AIVI News LINE Bot

è¼•é‡ç´šçš„ LINE botï¼Œç•¶ä½¿ç”¨è€…å‚³é€ `/aivi` æŒ‡ä»¤æ™‚ï¼Œå³æ™‚çˆ¬å– AIVI ç§‘æŠ€åšå®¢æœ€æ–° 5 å‰‡æ–‡ç« ä¸¦å›å‚³ã€‚

## åŠŸèƒ½

- ğŸ“° çˆ¬å– AIVI æœ€æ–°æ–‡ç« ï¼ˆæ¨™é¡Œ + é€£çµï¼‰
- ğŸ¤– LINE Bot æŒ‡ä»¤è™•ç†ï¼ˆ`/aivi`ï¼‰
- âš¡ï¸ å¿«é€Ÿå›æ‡‰ï¼ˆ< 10 ç§’ï¼‰
- ğŸ›¡ï¸ å®Œæ•´çš„éŒ¯èª¤è™•ç†èˆ‡å‹å–„éŒ¯èª¤è¨Šæ¯

## æŠ€è¡“æ¶æ§‹

- **çˆ¬èŸ²**ï¼šhttpx + selectolax
- **Bot æ¡†æ¶**ï¼šline-bot-sdk + Flask
- **å¥—ä»¶ç®¡ç†**ï¼šuv
- **éƒ¨ç½²**ï¼šHugging Face Space

## æœ¬æ©Ÿé–‹ç™¼

### ç’°å¢ƒå»ºç½®

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
uv venv

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
source .venv/bin/activate

# å®‰è£ç›¸ä¾å¥—ä»¶
uv sync --all-extras

# è¨­å®šç’°å¢ƒè®Šæ•¸
cp .env.example .env
# ç·¨è¼¯ .envï¼Œå¡«å…¥ LINE credentials
```

### åŸ·è¡Œæ¸¬è©¦

```bash
# å¿«é€Ÿæ¸¬è©¦ï¼ˆæœ¬æ©Ÿï¼‰
pytest -m "not slow"

# å®Œæ•´æ¸¬è©¦ï¼ˆå« coverageï¼‰
pytest --cov=src --cov-report=term
```

### åŸ·è¡Œæœå‹™

```bash
# å•Ÿå‹• Flask webhook æœå‹™
python src/app.py

# ä½¿ç”¨ ngrok å»ºç«‹ HTTPS tunnel
ngrok http 5000
```

## éƒ¨ç½²æµç¨‹

1. æ¨é€åˆ° GitHub main åˆ†æ”¯
2. GitHub Actions è‡ªå‹•åŒæ­¥åˆ° Hugging Face
3. Hugging Face Space è‡ªå‹•é‡æ–°éƒ¨ç½²

## æˆæ¬Š

MIT License
```

### é–‹ç™¼æŒ‡å—ï¼ˆdocs/development.mdï¼‰

```markdown
# é–‹ç™¼æŒ‡å—

## å°ˆæ¡ˆçµæ§‹

```
aivi-linebot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ scrapers/        # çˆ¬èŸ²æ¨¡çµ„
â”‚   â”œâ”€â”€ handlers/        # æŒ‡ä»¤è™•ç†å™¨
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½å¼
â”‚   â””â”€â”€ app.py           # Webhook æœå‹™
â”œâ”€â”€ tests/               # æ¸¬è©¦æª”æ¡ˆ
â”œâ”€â”€ docs/                # æ–‡ä»¶
â””â”€â”€ .github/workflows/   # CI/CD
```

## é–‹ç™¼æµç¨‹

### 1. æ–°å¢åŠŸèƒ½
1. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/xxx`
2. å¯¦ä½œåŠŸèƒ½ä¸¦æ’°å¯«æ¸¬è©¦
3. æœ¬æ©Ÿæ¸¬è©¦ï¼š`pytest -m "not slow"`
4. æäº¤ PR åˆ° main

### 2. æ¸¬è©¦ç­–ç•¥
- **æœ¬æ©Ÿ**ï¼šå¿«é€Ÿæ¸¬è©¦ï¼ˆæ’é™¤ slowï¼‰
- **CI**ï¼šå®Œæ•´æ¸¬è©¦ + coverage

### 3. ç¨‹å¼ç¢¼é¢¨æ ¼
- éµå¾ª PEP 8
- ä½¿ç”¨ç¹é«”ä¸­æ–‡è¨»è§£å’Œ docstring
- å‡½å¼éƒ½è¦æœ‰ type hints

## é™¤éŒ¯æŠ€å·§

### æª¢æŸ¥ LINE webhook äº‹ä»¶
```python
logger.info(f"æ”¶åˆ°äº‹ä»¶: {event}")
```

### æ¸¬è©¦çˆ¬èŸ²æ¨¡çµ„
```python
python -c "import asyncio; from src.scrapers.aivi_scraper import scrape_aivi_news; print(asyncio.run(scrape_aivi_news()))"
```
```

### GitHub Actions Workflow

å»ºç«‹ `.github/workflows/sync-to-hf.yml`ï¼š
```yaml
name: Sync to Hugging Face

on:
  push:
    branches:
      - main

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Push to Hugging Face
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
        run: |
          git remote add hf https://huggingface.co/spaces/YOUR_USERNAME/aivi-linebot
          git push hf main --force
```

### Hugging Face Space è¨­å®š

å»ºç«‹ `README_HF.md`ï¼ˆHugging Face å°ˆç”¨ç‰ˆæœ¬ï¼‰ï¼š
```markdown
---
title: AIVI News LINE Bot
emoji: ğŸ“°
colorFrom: blue
colorTo: green
sdk: docker
pinned: false
---

# AIVI News LINE Bot

LINE bot webhook æœå‹™ï¼Œéƒ¨ç½²åœ¨ Hugging Face Spaceã€‚

## ç’°å¢ƒè®Šæ•¸è¨­å®š

åœ¨ Hugging Face Space Settings ä¸­è¨­å®šï¼š
- `LINE_CHANNEL_SECRET`
- `LINE_CHANNEL_ACCESS_TOKEN`
- `PORT=7860`ï¼ˆHugging Face é è¨­ portï¼‰
```

å»ºç«‹ `Dockerfile`ï¼ˆHugging Face ä½¿ç”¨ï¼‰ï¼š
```dockerfile
FROM python:3.10-slim

WORKDIR /app

# å®‰è£ uv
RUN pip install uv

# è¤‡è£½å°ˆæ¡ˆæª”æ¡ˆ
COPY pyproject.toml uv.lock ./
COPY src ./src

# å®‰è£ç›¸ä¾å¥—ä»¶
RUN uv sync

# æš´éœ² port
EXPOSE 7860

# å•Ÿå‹•æœå‹™
CMD ["uv", "run", "python", "src/app.py"]
```

### éƒ¨ç½²æª¢æŸ¥æ¸…å–®

éƒ¨ç½²å‰ç¢ºèªï¼š
- [ ] GitHub Secrets å·²è¨­å®š `HF_TOKEN`
- [ ] Hugging Face Space å·²å»ºç«‹
- [ ] ç’°å¢ƒè®Šæ•¸å·²åœ¨ Hugging Face è¨­å®š
- [ ] `Dockerfile` å·²å»ºç«‹
- [ ] `README_HF.md` å·²å»ºç«‹
- [ ] GitHub Actions workflow å·²å»ºç«‹

éƒ¨ç½²å¾Œç¢ºèªï¼š
- [ ] GitHub Actions åŸ·è¡ŒæˆåŠŸ
- [ ] Hugging Face Space å»ºç½®æˆåŠŸ
- [ ] Webhook URL å·²æ›´æ–°åˆ° LINE Developers Console
- [ ] åœ¨ LINE å‚³é€ `/aivi` å¯æ­£å¸¸å›è¦†

## Dependencies
- [ ] Task 006 å®Œæˆï¼ˆæ•´åˆæ¸¬è©¦å·²é€šéï¼‰
- [ ] Hugging Face å¸³è™Ÿå·²å»ºç«‹
- [ ] GitHub Secrets å·²è¨­å®š HF_TOKEN
- [ ] LINE Developers Console å­˜å–æ¬Šé™

## Effort Estimate
- Size: M
- Hours: 3
- Parallel: false

## Definition of Done
- [ ] README.md å·²æ›´æ–°ä¸”å…§å®¹å®Œæ•´
- [ ] `docs/development.md` å·²å»ºç«‹
- [ ] `.github/workflows/sync-to-hf.yml` å·²å»ºç«‹
- [ ] `Dockerfile` å·²å»ºç«‹
- [ ] `README_HF.md` å·²å»ºç«‹
- [ ] æ¨é€åˆ° GitHub main åˆ†æ”¯
- [ ] GitHub Actions åŸ·è¡ŒæˆåŠŸ
- [ ] Hugging Face Space éƒ¨ç½²æˆåŠŸ
- [ ] Webhook URL å·²è¨­å®šåˆ° LINE
- [ ] æ­£å¼ç’°å¢ƒæ¸¬è©¦é€šéï¼ˆå‚³é€ `/aivi` å¯æ”¶åˆ°å›è¦†ï¼‰
